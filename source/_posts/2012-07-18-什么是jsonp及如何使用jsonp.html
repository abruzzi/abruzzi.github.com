---
layout: post
title: 什么是JSONP及如何使用JSONP?
categories:
- JavaScript
tags: []
published: true
comments: false
---
<p><h2>什么是JSONP及使用方式简介</h2></p>

<p><h3>普通形式的Javascript流程</h3></p>

<p><pre><code>function handler(data){
    console.dir(datamodel);
}</code></pre></p>

<p>var datamodel = {<br />
    name : "juntao",<br />
    age : 28，<br />
    address : "On the way home"<br />
}</p>

<p>handler(datamodel);
</p>

<p><h3>将上边的代码分离开</h3></p>

<p><p><em>On client side</em>:</p></p>

<p><pre><code>function handler(data){
    console.dir(datamodel);
}
</code></pre></p>

<p><p><em>On server side</em>:</p></p>

<p><pre><code>//in the real word application, those data
//may be generated by fetch data from database</code></pre></p>

<p>var datamodel = {<br />
    name : "juntao",<br />
    age : 28，<br />
    address : "On the way home"<br />
}</p>

<p>//call <br />
handler(datamodel);
</p>

<p><h2>What is going on?</h2></p>

<p><p>客户端请求时，发送一个函数名，服务端负责生成对该函数的调用，比如：</p></p>

<p><pre><code>http://server.domain/page.x?callback=functionName
</code></pre></p>

<p><p>服务器生成一个js文件:</p></p>

<p><pre><code>functionName({
    //real data comes here.
});
</code></pre></p>

<p><p>而函数的实现则放在客户端，比如:</p></p>

<p><pre><code>function functionName(data){
    if (data){
        //do something with the data
    }
}
</code></pre></p>

<p><p>这样在客户端看来，和之前的所有代码定义在本地的例子并无二致。但是这个却解决了跨域调用的问题。</p>
</p>
